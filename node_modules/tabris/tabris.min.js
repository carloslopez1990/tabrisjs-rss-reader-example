/*!
 * Tabris.js 1.5.0 (2015-12-10 14:02)
 * 
 * Copyright (c) 2014, 2015 EclipseSource Inc.
 * All rights reserved.
 * 
 * Redistribution and use in source and binary forms, with or without
 * modification, are permitted provided that the following conditions are met:
 * 
 * * Redistributions of source code must retain the above copyright notice, this
 *   list of conditions and the following disclaimer.
 * 
 * * Redistributions in binary form must reproduce the above copyright notice,
 *   this list of conditions and the following disclaimer in the documentation
 *   and/or other materials provided with the distribution.
 * 
 * * Neither the name of Tabris.js nor the names of its
 *   contributors may be used to endorse or promote products derived from
 *   this software without specific prior written permission.
 * 
 * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS "AS IS"
 * AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE
 * IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE
 * DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT HOLDER OR CONTRIBUTORS BE LIABLE
 * FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL
 * DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR
 * SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER
 * CAUSED AND ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY,
 * OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE
 * OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
 */
!function(){function a(a,b){this.trigger(b,this,a)}function b(a){this._listen("patchInstall",!1);var b=this._pendingPatchCallback;if(delete this._pendingPatchCallback,"function"==typeof b)if(a.error)b(new Error(a.error));else try{var c=a.success?JSON.parse(a.success):null;b(null,c)}catch(d){b(new Error("Failed to parse patch.json"))}}function c(a){return a.split(/\/+/).map(function(a){if(".."===a)throw new Error("Path must not contain '..'");return"."===a?"":a}).filter(function(a){return!!a}).join("/")}var d={extend:function(a){for(var b=1;b<arguments.length;b++){var c=arguments[b];for(var d in c)a[d]=c[d]}return a},pick:function(a,b){var c={};for(var d in a)-1!==b.indexOf(d)&&(c[d]=a[d]);return c},omit:function(a,b){var c={};for(var d in a)-1===b.indexOf(d)&&(c[d]=a[d]);return c},clone:function(a){var b={};for(var c in a)b[c]=a[c];return b},rename:function(a,b){var c={};for(var d in a)c[b[d]||d]=a[d];return c},invert:function(a){var b={};for(var c in a)b[a[c]]=c;return b},extendPrototype:function(a,b){var c=function(){};return c.prototype=a.prototype,this.extend(new c,b,{"super":function(b){return a.prototype[b].apply(this,Array.prototype.slice.call(arguments,1))}})}};!function(){d.colorArrayToString=function(a){var b=a[0],c=a[1],d=a[2],e=3===a.length?1:Math.round(100*a[3]/255)/100;return"rgba("+b+", "+c+", "+d+", "+e+")"},d.colorStringToArray=function(b){if("transparent"===b)return[0,0,0,0];if(/^#([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/.test(b))return[parseInt(RegExp.$1,16),parseInt(RegExp.$2,16),parseInt(RegExp.$3,16),255];if(/^#([0-9a-fA-F])([0-9a-fA-F])([0-9a-fA-F])$/.test(b))return[17*parseInt(RegExp.$1,16),17*parseInt(RegExp.$2,16),17*parseInt(RegExp.$3,16),255];if(/^rgb\s*\(\s*([+\-]?[0-9]+)\s*,\s*([+\-]?[0-9]+)\s*,\s*([+\-]?[0-9]+)\s*\)$/.test(b))return[Math.max(0,Math.min(255,parseInt(RegExp.$1))),Math.max(0,Math.min(255,parseInt(RegExp.$2))),Math.max(0,Math.min(255,parseInt(RegExp.$3))),255];if(/^rgba\s*\(\s*([+\-]?[0-9]+)\s*,\s*([+\-]?[0-9]+)\s*,\s*([+\-]?[0-9]+)\s*,\s*([+\-]?([0-9]*\.)?[0-9]+)\s*\)$/.test(b))return[Math.max(0,Math.min(255,parseInt(RegExp.$1))),Math.max(0,Math.min(255,parseInt(RegExp.$2))),Math.max(0,Math.min(255,parseInt(RegExp.$3))),Math.round(255*Math.max(0,Math.min(1,parseFloat(RegExp.$4))))];if(b in a){var c=a[b];return[c[0],c[1],c[2],255]}throw new Error("invalid color: "+b)};var a={black:[0,0,0],silver:[192,192,192],gray:[128,128,128],white:[255,255,255],maroon:[128,0,0],red:[255,0,0],purple:[128,0,128],fuchsia:[255,0,255],green:[0,128,0],lime:[0,255,0],olive:[128,128,0],yellow:[255,255,0],navy:[0,0,128],blue:[0,0,255],teal:[0,128,128],aqua:[0,255,255]}}(),function(){d.fontStringToArray=function(d){var e=[[],0,!1,!1],f=d.split(/(?:\s|^)\d+px(?:\s|$)/);return c(2===f.length||1===f.length,"Invalid font syntax"),e[1]=parseInt(/(?:\s|^)(\d+)px(?:\s|$)/.exec(d)[1],10),a(e,f[0]),b(e,f[1]),e},d.fontArrayToString=function(a){return(a[3]?"italic ":"")+(a[2]?"bold ":"")+(a[1]+"px")+(a[0][0]?" ":"")+a[0].join(", ")};var a=function(a,b){var d=b.trim().split(/\s+/);c(d.length<=2,"Too many font styles"),d.forEach(function(b){switch(b.trim()){case"italic":c(a[3]===!1,"Invalid font variant"),a[3]=!0;break;case"bold":c(a[2]===!1,"Invalid font weight"),a[2]=!0;break;case"normal":case"":break;default:throw new Error("Unknown font property: "+b.trim())}})},b=function(a,b){(b?b.split(","):[]).forEach(function(b){var d=/(?:^\s*[^\"\']+\s*$)|(?:^\s*\"[^\"\']+\"\s*$)|(?:^\s*\'[^\"\']+\'\s*$)/.exec(b);c(d,"Invalid font family: "+b),a[0].push(/^\s*[\"\']?([^\"\']*)/.exec(b)[1].trim())})},c=function(a,b){if(!a)throw new Error(b)}}(),function(){function a(a){return null!=a?a:null}d.imageToArray=function(b){return[b.src,a(b.width),a(b.height),a(b.scale)]},d.imageFromArray=function(a){var b={src:a[0]};return a[1]&&(b.width=a[1]),a[2]&&(b.height=a[2]),a[3]&&(b.scale=a[3]),b}}(),function(a){function b(a){var b=a;if("string"==typeof a?b=tabris.PropertyTypes[a]:Array.isArray(a)&&(b=tabris.PropertyTypes[a[0]]),"object"!=typeof b)throw new Error("Can not find property type "+a);if(Array.isArray(a)){b=d.clone(b);var e=a.slice(1);b.encode&&(b.encode=c(b.encode,e)),b.decode&&(b.decode=c(b.decode,e))}return b}function c(a,b){return function(c){return a.apply(window,[c].concat(b))}}function e(a,b,c){this._nativeSet(a,b),this.constructor._properties[a].nocache?this._triggerChangeEvent(a,b,c):this._storeProperty(a,b,c)}function f(a){var b=this._getStoredProperty(a);return void 0===b&&(b=this._nativeGet(a)),b}function g(a){var b={};for(var c in a){var d=a[c].name;b[d]=c}return b}function h(a){var b=k[a];return b instanceof Object?d.clone(b):b}window.tabris=a.exports=d.extend(function(a){if(!tabris._proxies[a]&&!tabris[a])throw new Error("No native object with cid or type "+a);var b=tabris[a]&&tabris[a]._type?tabris[a]._type:a;return b in tabris._proxies?tabris._proxies[b]:new tabris[a](b)},{_loadFunctions:[],_proxies:{},_ready:!1,load:function(a){tabris._ready?a.call():tabris._loadFunctions.push(a)},create:function(a,b){if(!tabris._nativeBridge)throw new Error("tabris.js not started");if(!(a in tabris))throw new Error("Unknown type "+a);return tabris[a].prototype.type!==a&&console.warn('"'+a+'" is deprecated, use "'+tabris[a].prototype.type+'"'),(new tabris[a])._create(b||{})},registerType:function(a,b){if(a in tabris)throw new Error("Type already registered: "+a);tabris[a]=function(){tabris.Proxy.apply(this,arguments)};for(var c in k)tabris[a][c]=b[c]||h(c);tabris[a]._events=i(tabris[a]._events),tabris[a]._properties=j(tabris[a]._properties),tabris[a]._trigger=g(tabris[a]._events);var e=d.omit(b,Object.keys(k));e.type=a,e.constructor=tabris[a],tabris[a].prototype=d.extendPrototype(tabris.Proxy,e)},version:"1.5.0",_init:function(a){tabris.off(),tabris._off(),tabris._client=a,tabris._nativeBridge=new tabris.NativeBridge(a);for(var b=0;b<tabris._loadFunctions.length;)tabris._loadFunctions[b++].call();tabris._ready=!0},_setEntryPoint:function(a){this._entryPoint=a},_notify:function(a,b,c){var d;try{var e=tabris._proxies[a];if(e)try{d=e._trigger(b,c)}catch(f){console.error(f),console.log(f.stack)}tabris.trigger("flush")}catch(g){console.error(g),console.log(g.stack)}return d},_reset:function(){this._loadFunctions=[],this._proxies={}}});var i=tabris.registerType.normalizeEventsMap=function(a){var b={};for(var c in a){var d=a[c];b[c]="object"==typeof d?d:{},b[c].name||(b[c].name="string"==typeof d?d:c),b[c].alias&&(b[c].originalName=c,b[b[c].alias]=b[c])}return b},j=tabris.registerType.normalizePropertiesMap=function(a){var c={};for(var d in a){var g=a[d];g===!0&&(console.warn("A custom component uses deprecated property type value 'true'"),g="any");var h="string"==typeof g||Array.isArray(g);c[d]={type:b((h?g:g.type)||"any"),"default":g["default"],nocache:g.nocache,access:{set:g.access&&g.access.set||e,get:g.access&&g.access.get||f}}}return c},k={_events:{},_initProperties:{},_type:null,_properties:{},_supportsChildren:!1}}("undefined"!=typeof module?module:{}),function(){tabris.NativeBridge=function(a){this._bridge=a,this._operations=[],this._currentOperation={id:null},tabris._on("flush",this.flush,this)},tabris.NativeBridge.prototype={create:function(a,b){var c={};this._operations.push(["create",a,b,c]),this._currentOperation={id:a,properties:c}},set:function(a,b,c){if(this._currentOperation.id===a)this._currentOperation.properties[b]=c;else{var d={};d[b]=c,this._operations.push(["set",a,d]),this._currentOperation={id:a,properties:d}}},listen:function(a,b,c){this._operations.push(["listen",a,b,c]),this._currentOperation={id:null}},destroy:function(a){this._operations.push(["destroy",a]),this._currentOperation={id:null}},get:function(a,b){return this.flush(),this._bridge.get(a,b)},call:function(a,b,c){return this.flush(),this._bridge.call(a,b,c)},flush:function(){tabris.Layout.flushQueue();var a=this._operations;this._operations=[],this._currentOperation={id:null};for(var b=a.length,c=0;b>c;c++){var d=a[c];switch(d[0]){case"create":this._bridge.create(d[1],d[2],d[3]);break;case"set":this._bridge.set(d[1],d[2]);break;case"listen":this._bridge.listen(d[1],d[2],d[3]);break;case"destroy":this._bridge.destroy(d[1])}}}}}(),tabris.Events={on:function(a,b,c){return this._on(a,b,c,!0)},off:function(a,b,c){return this._off(a,b,c,!0)},_on:function(a,b,c,d){this._checkDisposed();var e=d?"_callbacks":"_privateCallbacks",f=this._isListening(a);return this[e]||(this[e]=[]),this[e][a]=(this[e][a]||[]).concat([{fn:b,ctx:c}]),f||this._listen(a,!0),this},_off:function(a,b,c,d){this._checkDisposed();var e=d?"_callbacks":"_privateCallbacks";if(this[e])if(a){if(a in this[e])if(b){for(var f=this[e][a].concat(),g=f.length-1;g>=0;g--)f[g].fn!==b&&f[g].fn._callback!==b||c&&f[g].ctx!==c||f.splice(g,1);0===f.length?(delete this[e][a],0===Object.keys(this[e]).length&&delete this[e]):this[e][a]=f}else delete this[e][a]}else delete this[e];return this._isListening(a)||this._listen(a,!1),this},once:function(a,b,c){this._checkDisposed();var d=this,e=function(){d._isDisposed||d.off(a,e,c),b.apply(this,arguments)};return e._callback=b,this.on(a,e,c)},trigger:function(a){if(!this._isDisposed){var b=Array.prototype.slice.call(arguments,1);this._callAll(a,b,!1),this._callAll(a,b,!0)}return this},_callAll:function(a,b,c){var d=c?"_callbacks":"_privateCallbacks";if(this[d]&&a in this[d])for(var e=this[d][a],f=0;f<e.length;f++){var g=e[f];g.fn.apply(g.ctx||this,b)}},_isListening:function(a){return!!this._callbacks&&(!a||a in this._callbacks)||!!this._privateCallbacks&&(!a||a in this._privateCallbacks)},_checkDisposed:function(){},_listen:function(){}},d.extend(tabris,tabris.Events),function(){function a(a){var c=a.split(/\s+/);return c[1]=parseFloat(c[1]),b(c)}function b(a){if(2!==a.length)throw new Error("list length must be 2");var b=a[0],c=a[1];if(i(b))b=parseInt(b);else if(!j(b)&&!k(b))throw new Error("first element must be a percentage or a widget reference");if(!j(c))throw new Error("second element must be a number");return 0===b?c:[b,c]}function c(a){return 0===a[0]?a[1]:0===a[1]?j(a[0])?a[0]+"%":a[0]:[j(a[0])?a[0]+"%":a[0],a[1]]}function e(a,b){return Array.isArray(a)?f(a,b):j(a)?a:g(a,b)}function f(a,b){return j(a[0])?a:[g(a[0],b),a[1]]}function g(a,b){if("prev()"===a){var c=l(b).children(),d=c.indexOf(b);return d>0?tabris.PropertyTypes.proxy.encode(c[d-1])||0:0}if("string"==typeof a){var e=l(b).children(a)[0];return tabris.PropertyTypes.proxy.encode(e)||0}return tabris.PropertyTypes.proxy.encode(a)||0}function h(a){return"string"==typeof a&&-1!==a.indexOf(" ")}function i(a){return"string"==typeof a&&"%"===a[a.length-1]&&!isNaN(parseInt(a))}function j(a){return"number"==typeof a&&isFinite(a)}function k(a){return a instanceof tabris.Proxy?!0:"string"==typeof a?"prev()"===a||o.test(a):!1}function l(a){return a.parent()||p}tabris.Layout={checkConsistency:function(a){var b=a;return"centerX"in b&&("left"in b||"right"in b)&&(console.warn("Inconsistent layoutData: centerX overrides left and right"),b=d.omit(b,["left","right"])),"baseline"in b?("top"in b||"bottom"in b||"centerY"in b)&&(console.warn("Inconsistent layoutData: baseline overrides top, bottom, and centerY"),b=d.omit(b,["top","bottom","centerY"])):"centerY"in b&&("top"in b||"bottom"in b)&&(console.warn("Inconsistent layoutData: centerY overrides top and bottom"),b=d.omit(b,["top","bottom"])),"left"in b&&"right"in b&&"width"in b&&(console.warn("Inconsistent layoutData: left and right are set, ignore width"),b=d.omit(b,["width"])),"top"in b&&"bottom"in b&&"height"in b&&(console.warn("Inconsistent layoutData: top and bottom are set, ignore height"),b=d.omit(b,["height"])),b},encodeLayoutData:function(a){var b={};for(var c in a)if(null!=a[c]){if(!(c in n))throw new Error("Invalid key '"+c+"' in layoutData");try{b[c]=n[c](a[c])}catch(d){throw new Error("Invalid value for '"+c+"': "+d.message)}}return b},encodeEdge:function(c){if(h(c))return a(c);if(Array.isArray(c))return b(c);if(j(c))return c;if(i(c)){var d=parseInt(c);return 0===d?0:[d,0]}if(k(c))return[c,0];throw new Error("invalid type")},encodeSize:function(a){if(!j(a))throw new Error("must be a number");return a},encodeRef:function(a){if(!k(a))throw new Error("must be a widget reference");return a},decodeLayoutData:function(a){if(!a)return null;var b={};for(var c in a)b[c]=tabris.Layout.decodeAttribute(a[c]);return b},decodeAttribute:function(a){return Array.isArray(a)?c(a):a},resolveReferences:function(a,b){if(!b)return a;var c={};for(var d in a)c[d]=e(a[d],b);return c},addToQueue:function(a){m[a.cid]=a},flushQueue:function(){for(var a in m)m[a]._flushLayout();m={}}};var m={},n={width:tabris.Layout.encodeSize,height:tabris.Layout.encodeSize,left:tabris.Layout.encodeEdge,right:tabris.Layout.encodeEdge,top:tabris.Layout.encodeEdge,bottom:tabris.Layout.encodeEdge,centerX:tabris.Layout.encodeSize,centerY:tabris.Layout.encodeSize,baseline:tabris.Layout.encodeRef},o=/^(\*|([#.]?[A-Za-z0-9_-]+))$/,p={children:function(){return[]}}}(),function(){function a(a){return a instanceof Function?a():a}tabris.Properties={set:function(a,b,c){return this._checkDisposed(),"string"==typeof a?this._setProperty(a,b,c||{}):this._setProperties(a,b||{}),this},get:function(a){this._checkDisposed();var b=this._getPropertyGetter(a)||this._getStoredProperty,c=b.call(this,a);return this._decodeProperty(this._getTypeDef(a),c)},_setProperties:function(a,b){for(var c in a)this._setProperty(c,a[c],b)},_setProperty:function(a,b,c){var d,e=this._getTypeDef(a);try{d=this._encodeProperty(e,b)}catch(f){return void console.warn(this.toString()+': Ignored unsupported value for property "'+a+'": '+f.message)}var g=this._getPropertySetter(a)||this._storeProperty;g.call(this,a,d,c)},_storeProperty:function(a,b,c){var d=this._getStoredProperty(a);b!==d&&(void 0===b&&this._props?delete this._props[a]:(this._props||(this._props={}),this._props[a]=b),this._triggerChangeEvent(a,b,c))},_getStoredProperty:function(a){var b=this._props?this._props[a]:void 0;return void 0===b&&(b=this._getDefaultPropertyValue(a)),b},_getTypeDef:function(a){var b=this.constructor._properties[a];return b?b.type:null},_getDefaultPropertyValue:function(b){var c=this.constructor._properties[b];return c?a(c["default"]):void 0},_encodeProperty:function(a,b){return a&&a.encode?a.encode(b):b},_decodeProperty:function(a,b){return a&&a.decode?a.decode(b):b},_getPropertyGetter:function(a){var b=this.constructor._properties[a];return b&&b.access?b.access.get:void 0},_getPropertySetter:function(a){var b=this.constructor._properties[a];return b&&b.access?b.access.set:void 0},_triggerChangeEvent:function(a,b,c){var d=this._getTypeDef(a),e=this._decodeProperty(d,b);this.trigger("change:"+a,this,e,c||{})},_checkDisposed:function(){},trigger:function(){}}}(),function(){function a(){return"o"+b++}tabris.Proxy=function(b){this.cid=b||a(),tabris._proxies[this.cid]=this},d.extend(tabris.Proxy.prototype,tabris.Properties,tabris.Events,{_create:function(a){var b=this.constructor._type||this.type;if(tabris._nativeBridge.create(this.cid,b),this.constructor._initProperties)for(var c in this.constructor._initProperties)this._nativeSet(c,this.constructor._initProperties[c]);return this._setProperties(a||{}),this},dispose:function(){this._dispose()},_dispose:function(a){this._isDisposed||this._inDispose||(this._inDispose=!0,this.trigger("dispose",this,{}),this._release(),a||tabris._nativeBridge.destroy(this.cid),delete tabris._proxies[this.cid],this._isDisposed=!0)},_release:function(){},isDisposed:function(){return!!this._isDisposed},_listen:function(a,b){var c=this._getEventConfig(a);c&&!this._isListeningToAlias(a,c)&&(c.listen?c.listen.call(this,b,c.alias===a):this._nativeListen(c.name,b))},_isListeningToAlias:function(a,b){if(!b.alias)return!1;var c=a===b.originalName?b.alias:b.originalName;return this._isListening(c)},_nativeListen:function(a,b){tabris._nativeBridge.listen(this.cid,a,b)},_trigger:function(a,b){var c=this.constructor._trigger[a],d=c&&this.constructor._events[c].trigger;return d instanceof Function?d.call(this,b,c):void(c?this.trigger(c,b):this.trigger(a,b))},_checkDisposed:function(){if(this._isDisposed)throw new Error("Object is disposed")},_getEventConfig:function(a){return this.constructor._events[a]},_nativeSet:function(a,b){tabris._nativeBridge.set(this.cid,a,b)},_nativeGet:function(a){return tabris._nativeBridge.get(this.cid,a)},_nativeCall:function(a,b){return this._checkDisposed(),tabris._nativeBridge.call(this.cid,a,b)},toString:function(){return this.type}});var b=1}(),function(){function a(a,d,e){if(!a||0===a.length)return[];if("*"===d&&!e)return a.concat();var f=c(d);return e?b([],a,f):a.filter(f)}function b(a,c,d){for(var e=0;e<c.length;e++)d(c[e])&&a.push(c[e]),c[e]._children&&b(a,c[e]._getSelectableChildren(),d);return a}function c(a){var b={},c=a instanceof Function?a:d(a);return function(a){return b[a.cid]?!1:c(a)?(b[a.cid]=!0,!0):!1}}function d(a){if("#"===a.charAt(0)){var b=a.slice(1);return function(a){return b===a.id}}if("."===a.charAt(0)){var c=a.slice(1);return function(a){return-1!==a.classList.indexOf(c)}}return"*"===a?function(){return!0}:function(b){return a===b.type}}tabris.ProxyCollection=function(b,c,d){this._array=a(b,c||"*",d);for(var e=0;e<this._array.length;e++)this[e]=this._array[e];this.length=this._array.length};var e=tabris.ProxyCollection.prototype={first:function(){return this._array[0]},last:function(){return this._array[this._array.length-1]},toArray:function(){return this._array.concat()},forEach:function(a){var b=this;this._array.forEach(function(c,d){a(c,d,b)})},indexOf:function(a){return this._array.indexOf(a)},filter:function(a){return new tabris.ProxyCollection(this._array,a)},get:function(a){return this._array[0]?this._array[0].get(a):void 0},parent:function(){for(var a=[],b=0;b<this._array.length;b++){var c=this._array[b].parent();c&&-1===a.indexOf(c)&&a.push(c)}return a.length?new tabris.ProxyCollection(a):void 0},children:function(a){for(var b=[],c=0;c<this._array.length;c++)b.push.apply(b,this._array[c]._getSelectableChildren()||[]);return new tabris.ProxyCollection(b,a)},find:function(a){return new tabris.ProxyCollection(this.children()._array,a,!0)},appendTo:function(a){a.append(this)},dispose:function(){for(var a=0;a<this._array.length;a++)this._array[a].dispose()}};["set","animate","on","off","once"].forEach(function(a){e[a]=function(){for(var b=0;b<this._array.length;b++)this._array[b][a].apply(this._array[b],arguments);return"animate"!==a?this:void 0}})}(),function(){function a(a){return"number"==typeof a&&!isNaN(a)&&a>=0&&a!==1/0}function b(a,b){var c=['Accepting "'];throw c.push(a.join('", "')),c.push('", given was: "',b+'"'),new Error(c.join(""))}function c(a){if("number"!=typeof a)throw new Error(typeof a+" is not a number: "+a);if(isNaN(a)||a===1/0||a===-(1/0))throw new Error("Number is not a valid value: "+a)}tabris.PropertyTypes={any:{},"boolean":{encode:function(a){return!!a}},string:{encode:function(a){return""+a}},number:{encode:function(a){return c(a),a}},natural:{encode:function(a){return c(a),0>a?0:Math.round(a)}},integer:{encode:function(a){return c(a),Math.round(a)}},"function":{encode:function(a){if("function"!=typeof a)throw new Error(typeof a+" is not a function: "+a);return a}},choice:{encode:function(a,c){return Array.isArray(c)?(-1===c.indexOf(a)&&b(c,a),a):(a in c||b(Object.keys(c),a),c[a])}},color:{encode:function(a){return"initial"!==a?d.colorStringToArray(a):void 0},decode:function(a){return a?d.colorArrayToString(a):"rgba(0, 0, 0, 0)"}},font:{encode:function(a){return"initial"!==a?d.fontStringToArray(a):void 0},decode:function(a){return a?d.fontArrayToString(a):"initial"}},image:{encode:function(b){if(!b)return null;if("string"==typeof b&&(b={src:b}),"object"!=typeof b)throw new Error("Not an image: "+b);if("string"!=typeof b.src)throw new Error("image.src is not a string");if(""===b.src)throw new Error("image.src is an empty string");return["scale","width","height"].forEach(function(c){if(c in b&&!a(b[c]))throw new Error("image."+c+" is not a dimension: "+b[c])}),"scale"in b&&("width"in b||"height"in b)&&console.warn("Image scale is ignored if width or height are given"),d.imageToArray(b)},decode:function(a){return a?d.imageFromArray(a):null}},layoutData:{encode:function(a){return tabris.Layout.encodeLayoutData(a)},decode:function(a){return tabris.Layout.decodeLayoutData(a)}},edge:{encode:function(a){return null==a?null:tabris.Layout.encodeEdge(a)},decode:function(a){return tabris.Layout.decodeAttribute(a)}},dimension:{encode:function(a){return null==a?null:tabris.Layout.encodeSize(a)},decode:function(a){return tabris.Layout.decodeAttribute(a)}},sibling:{encode:function(a){return null==a?null:tabris.Layout.encodeRef(a)},decode:function(a){return tabris.Layout.decodeAttribute(a)}},bounds:{encode:function(a){return[a.left,a.top,a.width,a.height]},decode:function(a){return{left:a[0],top:a[1],width:a[2],height:a[3]}}},proxy:{encode:function(a){return a instanceof tabris.Proxy?a.cid:a instanceof tabris.ProxyCollection?a[0]?a[0].cid:null:a}},nullable:{encode:function(a,b){return null===a?a:tabris.PropertyTypes[b].encode(a)}},opacity:{encode:function(a){if(c(a),0>a||a>1)throw new Error("Number is out of bounds: "+a);return a}},transform:{encode:function(a){for(var b in a){if(!(b in e))throw new Error('Not a valid transformation containing "'+b+'"');c(a[b])}return d.extend({},e,a)}},array:{encode:function(a,b){if(null==a)return[];if(!(a instanceof Array))throw new Error(typeof a+" is not an array: "+a);return b?a.map(tabris.PropertyTypes[b].encode):a.concat()}}};var e={rotation:0,scaleX:1,scaleY:1,translationX:0,translationY:0,translationZ:0}}(),function(){tabris.registerType("_Animation",{_type:"tabris.Animation",_create:function(a){return tabris.Proxy.prototype._create.call(this,a),this._nativeListen("Start",!0),this._nativeListen("Completion",!0),this},_events:{Start:{trigger:function(){this._target.trigger("animationstart",this._target,this._options)}},Completion:{trigger:function(){this._target._off("dispose",this.dispose,this),this._target.trigger("animationend",this._target,this._options),this.dispose()}}},_properties:{properties:"any",delay:"natural",duration:"natural",repeat:"natural",reverse:"boolean",easing:["choice",["linear","ease-in","ease-out","ease-in-out"]],target:"proxy"},start:function(){this._nativeCall("start")}}),tabris._Animation.animate=function(b,c){var e={};for(var f in b)if(a[f])try{e[f]=this._encodeProperty(this._getTypeDef(f),b[f]),this._storeProperty(f,e[f],c)}catch(g){console.warn(this.type+': Ignored invalid animation property value for "'+f+'"')}else console.warn(this.type+': Ignored invalid animation property "'+f+'"');for(var h in c)tabris._Animation._properties[h]||"name"===h||console.warn(this.type+': Ignored invalid animation option "'+h+'"');var i=tabris.create("_Animation",d.extend({},c,{target:this,properties:e}));i._target=this,i._options=c,this._on("dispose",i.dispose,i),i.start()};var a={opacity:!0,transform:!0}}(),tabris.registerType("_GestureRecognizer",{_type:"tabris.GestureRecognizer",_properties:{type:"string",target:"proxy",fingers:"natural",touches:"natural",duration:"natural",direction:"string"},_events:{gesture:!0}}),function(){function a(){if(this._layoutData){var a=tabris.Layout.checkConsistency(this._layoutData);this._nativeSet("layoutData",tabris.Layout.resolveReferences(a,this))}}function b(a){return{listen:function(b){var e=this.get("gestures");if(b){var f=d.extend({target:this},e[a]),g=tabris.create("_GestureRecognizer",f).on("gesture",c,{target:this,name:a});this._recognizers||(this._recognizers={}),this._recognizers[a]=g,this._on("dispose",g.dispose,g)}else this._recognizers&&a in this._recognizers&&(this._recognizers[a].dispose(),delete this._recognizers[a])}}}function c(a){this.target.trigger(this.name,this.target,a)}function e(a,b){this.trigger(b,this,a||{})}tabris.Widgets={append:function(){this._checkDisposed();for(var a=arguments[0]instanceof tabris.ProxyCollection?arguments[0].toArray():arguments,b=0;b<a.length;b++){if(!(a[b]instanceof tabris.Proxy))throw new Error("Cannot append non-widget");a[b]._setParent(this)}return this},appendTo:function(a){if(this._checkDisposed(),a=a instanceof tabris.ProxyCollection?a.first():a,!(a instanceof tabris.Proxy))throw new Error("Cannot append to non-widget");return this._setParent(a),this},insertBefore:function(a){if(this._checkDisposed(),a=a instanceof tabris.ProxyCollection?a.first():a,!(a instanceof tabris.Proxy))throw new Error("Cannot insert before non-widget");var b=a.parent(),c=b._children.indexOf(a);return this._setParent(b,c),this},insertAfter:function(a){if(this._checkDisposed(),a=a instanceof tabris.ProxyCollection?a.first():a,!(a instanceof tabris.Proxy))throw new Error("Cannot insert after non-widget");var b=a.parent(),c=b._children.indexOf(a);return this._setParent(b,c+1),this},parent:function(){return this._parent},children:function(a){return new tabris.ProxyCollection(this._getSelectableChildren(),a)},find:function(a){return new tabris.ProxyCollection(this._getSelectableChildren(),a,!0)},apply:function(a){var b=new tabris.ProxyCollection(this._children.concat(this),"*",!0);a["*"]&&b.set(a["*"]);var c;for(c in a)"*"!==c&&"#"!==c[0]&&"."!==c[0]&&b.filter(c).set(a[c]);for(c in a)"."===c[0]&&b.filter(c).set(a[c]);for(c in a)"#"===c[0]&&b.filter(c).set(a[c]);return this},_getContainer:function(){return this},_getSelectableChildren:function(){return this._children},_setParent:function(a,b){this._nativeSet("parent",tabris.PropertyTypes.proxy.encode(a._getContainer(this))),this._parent&&(this._parent._removeChild(this),tabris.Layout.addToQueue(this._parent)),this._parent=a,this._parent._addChild(this,b),tabris.Layout.addToQueue(this._parent)},_addChild:function(a,b){var c=this.constructor._supportsChildren;if(c===!1)throw new Error(this.type+" cannot contain children");if("function"==typeof c&&!c(a))throw new Error(this.type+" cannot contain children of type "+a.type);this._children||(this._children=[]),"number"==typeof b?this._children.splice(b,0,a):this._children.push(a),this.trigger("addchild",this,a,{})},_removeChild:function(a){if(this._children){var b=this._children.indexOf(a);-1!==b&&this._children.splice(b,1),this.trigger("removechild",this,a,{index:b})}},_release:function(){if(this._children){for(var a=this._children.concat(),b=0;b<a.length;b++)a[b]._dispose(!0);delete this._children}this._parent&&(this._parent._removeChild(this),tabris.Layout.addToQueue(this._parent),delete this._parent)},_getEventConfig:function(a){var c=tabris.Proxy.prototype._getEventConfig.call(this,a);return!c&&this.get("gestures")[a]?b(a):c},_flushLayout:function(){this._children&&this._children.forEach(function(b){a.call(b)})},classList:{get length(){return 0},indexOf:function(){return-1},join:function(){return""}}},tabris.registerWidget=function(a,b){if(b=d.extend({animate:tabris._Animation.animate},tabris.Widgets,b),b._events=d.extend({},tabris.registerWidget._defaultEvents,b._events||{}),b._properties!==!0){var c=tabris.registerWidget._defaultProperties;b._properties=d.extend({},c,b._properties||{})}tabris.registerType(a,b)};var f;tabris.load(function(){f="Android"===tabris.device.get("platform")&&tabris.device.get("version")<=17});var g={set:function(a,b){this._layoutData||(this._layoutData={}),null==b?delete this._layoutData[a]:this._layoutData[a]=b,this._parent&&tabris.Layout.addToQueue(this._parent)},get:function(a){return this._layoutData&&null!=this._layoutData[a]?this._layoutData[a]:null}};d.extend(tabris.registerWidget,{_defaultEvents:{touchstart:{trigger:e},touchmove:{trigger:e},touchend:{trigger:e},touchcancel:{trigger:e},resize:{name:"Resize",alias:"change:bounds",trigger:function(a){if(f){var b=this;setTimeout(function(){b._triggerChangeEvent("bounds",a.bounds,{},"resize"),b.trigger("resize",b,tabris.PropertyTypes.bounds.decode(a.bounds),{})},0)}else this._triggerChangeEvent("bounds",a.bounds,{},"resize"),this.trigger("resize",this,tabris.PropertyTypes.bounds.decode(a.bounds),{})}}},_defaultProperties:tabris.registerType.normalizePropertiesMap({enabled:{type:"boolean","default":!0},visible:{type:"boolean","default":!0,access:{set:function(a,b,c){this._nativeSet("visibility",b),this._storeProperty(a,b,c)}}},layoutData:{type:"layoutData",access:{set:function(a,b){this._layoutData=b,this._parent&&tabris.Layout.addToQueue(this._parent)},get:function(){return this._layoutData||null}}},left:{type:"edge",access:g},right:{type:"edge",access:g},top:{type:"edge",access:g},bottom:{type:"edge",access:g},width:{type:"dimension",access:g},height:{type:"dimension",access:g},centerX:{type:"dimension",access:g},centerY:{type:"dimension",access:g},baseline:{type:"sibling",access:g},elevation:{type:"number","default":0},font:{type:"font",access:{set:function(a,b,c){this._nativeSet(a,void 0===b?null:b),this._storeProperty(a,b,c)}}},backgroundImage:"image",bounds:{type:"bounds",access:{set:function(){console.warn(this.type+': Can not set read-only property "bounds".')}}},background:{type:"color",access:{set:function(a,b,c){this._nativeSet(a,void 0===b?null:b),this._storeProperty(a,b,c)}}},textColor:{type:"color",access:{set:function(a,b,c){this._nativeSet("foreground",void 0===b?null:b),this._storeProperty(a,b,c)},get:function(a){var b=this._getStoredProperty(a);return void 0===b&&(b=this._nativeGet("foreground")),b}}},opacity:{type:"opacity","default":1},transform:{type:"transform","default":function(){return{rotation:0,scaleX:1,scaleY:1,translationX:0,translationY:0,translationZ:0}}},highlightOnTouch:{type:"boolean","default":!1},id:{type:"string",access:{set:function(a,b){this.id=b},get:function(){return this.id}}},"class":{type:"string",access:{set:function(a,b){this.classList=b.trim().split(/\s+/)},get:function(){return this.classList.join(" ")}}},gestures:{access:{set:function(a,b){this._gestures=d.extend({},h,b)},get:function(){return this._gestures||(this._gestures=d.extend({},h)),this._gestures}}}})});var h={tap:{type:"tap"},longpress:{type:"longpress"},pan:{type:"pan"},"pan:left":{type:"pan",direction:"left"},"pan:right":{type:"pan",direction:"right"},"pan:up":{type:"pan",direction:"up"},"pan:down":{type:"pan",direction:"down"},"pan:horizontal":{type:"pan",direction:"horizontal"},"pan:vertical":{type:"pan",direction:"vertical"},"swipe:left":{type:"swipe",direction:"left"},"swipe:right":{type:"swipe",direction:"right"},"swipe:up":{type:"swipe",direction:"up"},"swipe:down":{type:"swipe",direction:"down"}};tabris.registerWidget("Button",{_type:"rwt.widgets.Button",_initProperties:{style:["PUSH"]},_events:{select:{name:"Selection",listen:function(a){this._nativeListen("Selection",a)},trigger:function(a){this.trigger("select",this,a)}}},_properties:{alignment:{type:["choice",["left","right","center"]],"default":"center"},image:{type:"image","default":null},text:{type:"string","default":""}}}),tabris.registerWidget("Canvas",{_type:"rwt.widgets.Canvas",_supportsChildren:!0,getContext:function(a,b,c){return"2d"===a?tabris.CanvasContext.getContext(this,b,c):null}}),tabris.registerWidget("CheckBox",{_type:"rwt.widgets.Button",_initProperties:{style:["CHECK"]},_events:{select:{name:"Selection",alias:"change:selection",trigger:function(a){this._triggerChangeEvent("selection",a.selection),this.trigger("select",this,a.selection,{})}}},_properties:{text:{type:"string","default":""},selection:{type:"boolean",nocache:!0}}}),tabris.registerWidget("Composite",{_type:"rwt.widgets.Composite",_supportsChildren:!0}),tabris.registerWidget("ImageView",{_type:"tabris.ImageView",_properties:{image:{type:"image","default":null},scaleMode:{type:["choice",["auto","fit","fill","stretch","none"]],"default":"auto"}}}),tabris.registerWidget("TextView",{_type:"tabris.TextView",_properties:{alignment:{type:["choice",["left","right","center"]],"default":"left"},markupEnabled:{type:"boolean","default":!1},maxLines:{type:["nullable","natural"],"default":null,access:{set:function(a,b,c){this._nativeSet(a,0>=b?null:b),this._storeProperty(a,b,c)}}},text:{
type:"string","default":""}}}),tabris.registerWidget("ProgressBar",{_type:"rwt.widgets.ProgressBar",_properties:{minimum:{type:"integer","default":0},maximum:{type:"integer","default":100},selection:{type:"integer","default":0},state:{type:["choice",["normal","paused","error"]],"default":"normal"}}}),tabris.registerWidget("RadioButton",{_type:"rwt.widgets.Button",_initProperties:{style:["RADIO"]},_events:{select:{name:"Selection",alias:"change:selection",trigger:function(a){this._triggerChangeEvent("selection",a.selection),this.trigger("select",this,a.selection,{})}}},_properties:{text:{type:"string","default":""},selection:{type:"boolean",nocache:!0}}}),tabris.registerWidget("Slider",{_type:"rwt.widgets.Scale",_events:{select:{name:"Selection",alias:"change:selection",trigger:function(a){this._triggerChangeEvent("selection",a.selection),this.trigger("select",this,a.selection,{})}}},_properties:{minimum:{type:"integer","default":0},maximum:{type:"integer","default":100},selection:{type:"integer",nocache:!0}}}),tabris.registerWidget("TextInput",{_type:"tabris.TextInput",_events:{focus:{trigger:e},blur:{trigger:e},accept:{trigger:function(a){this.trigger("accept",this,a.text,{})}},input:{name:"modify",alias:"change:text",trigger:function(a){this._triggerChangeEvent("text",a.text),this.trigger("input",this,a.text,{})}}},_properties:{type:["choice",["default","password","search","multiline"]],text:{type:"string",nocache:!0},message:{type:"string","default":""},editable:{type:"boolean","default":!0},alignment:{type:["choice",["left","center","right"]],"default":"left"},autoCorrect:{type:"boolean","default":!1},autoCapitalize:{type:"boolean","default":!1},keyboard:{type:["choice",["ascii","decimal","email","number","numbersAndPunctuation","phone","url","default"]],"default":"default"}}}),tabris.registerWidget("ToggleButton",{_type:"rwt.widgets.Button",_initProperties:{style:["TOGGLE"]},_events:{select:{name:"Selection",alias:"change:selection",trigger:function(a){this._triggerChangeEvent("selection",a.selection),this.trigger("select",this,a.selection,{})}}},_properties:{text:{type:"string","default":""},image:{type:"image","default":null},selection:{type:"boolean",nocache:!0},alignment:{type:["choice",["left","right","center"]],"default":"center"}}}),tabris.registerWidget("Video",{_type:"tabris.widgets.Video",_initProperties:{controls_visible:!0,repeat:!1},_properties:{url:"string"}}),tabris.registerWidget("WebView",{_type:"rwt.widgets.Browser",_events:{load:{name:"Progress",trigger:e}},_properties:{url:{type:"string",nocache:!0},html:{type:"string",nocache:!0}}}),tabris.registerWidget("Switch",{_type:"tabris.Switch",_events:{select:{name:"toggle",alias:"change:selection",trigger:function(a){this._triggerChangeEvent("selection",a.checked),this.trigger("select",this,a.checked,{})}}},_properties:{selection:{type:"boolean",access:{get:function(){return this._nativeGet("checked")},set:function(a,b,c){this._nativeSet("checked",b),this._triggerChangeEvent(a,b,c)}}},thumbOnColor:{type:"color"},thumbOffColor:{type:"color"},trackOnColor:{type:"color"},trackOffColor:{type:"color"}}})}(),function(){function a(a,b,c){a._triggerChangeEvent("selection",a._getItem(b),d.extend({index:b},c))}tabris.registerWidget("Picker",{_type:"rwt.widgets.Combo",_initProperties:{selectionIndex:0},_events:{select:{name:"Selection",alias:"change:selectionIndex",trigger:function(a){this._triggerChangeEvent("selectionIndex",a.selectionIndex),this.trigger("select",this,this._getItem(a.selectionIndex),{index:a.selectionIndex})}},"change:selection":{listen:function(b){b?this._on("change:selectionIndex",a):this._off("change:selectionIndex",a)}}},_properties:{items:{type:"array","default":function(){return[]},access:{set:function(a,b,c){this._storeProperty(a,b,c);var d=this.get("itemText");this._nativeSet("items",b.map(d))}}},itemText:{type:"function","default":function(){return function(a){return null==a?"":a.toString()}},access:{set:function(a,b,c){this._storeProperty(a,b,c)}}},selectionIndex:{type:"natural",access:{set:function(a,b,c){this._nativeSet(a,b),this._triggerChangeEvent(a,b,c)}}},selection:{access:{set:function(a,b,c){var d=this._getItemIndex(b);-1!==d?this.set("selectionIndex",d,c):console.warn("Could not set picker selection "+b+": item not found")},get:function(){return this._getItem(this.get("selectionIndex"))}}}},_setProperties:function(a,b){var c=["items","selection","selectionIndex"];this["super"]("_setProperties",d.omit(a,c),b),c.forEach(function(c){c in a&&this._setProperty(c,a[c],b)},this)},_getItem:function(a){return this.get("items")[a]},_getItemIndex:function(a){return this.get("items").indexOf(a)}})}(),function(){var a=function(){};tabris.DOMEvent=function(a,b){this.type=a,this.timeStamp=Date.now(),"undefined"!=typeof b&&("bubbles"in b&&(this.bubbles=b.bubbles),"cancelable"in b&&(this.cancelable=b.cancelable))},tabris.DOMEvent.prototype={NONE:0,CAPTURING_PHASE:1,AT_TARGET:2,BUBBLING_PHASE:3,target:null,currentTarget:null,eventPhase:0,type:"",bubbles:!1,cancelable:!1,defaultPrevented:!1,isTrusted:!1,stopPropagation:a,stopImmediatePropagation:a,preventDefault:a,initEvent:function(a,b,c){this.type=a,this.bubbles=b,this.cancelable=c}},tabris._addDOMEventTargetMethods=function(a){if("function"!=typeof a.addEventListener){var b;a.addEventListener=function(a,c){b||(b=[]),a in b||(b[a]=[]);var d=b[a].indexOf(c);return-1===d&&b[a].push(c),1===b[a].length},a.removeEventListener=function(a,c){if(b&&a in b){var d=b[a].indexOf(c);if(-1!==d)return b[a].splice(d,1),0===b[a].length}return!1},a.dispatchEvent=function(c){if(b&&c.type in b){var d=b[c.type];c.target=a;for(var e=0;e<d.length;e++)d[e].call(this,c)}}}},"undefined"!=typeof window&&(tabris._addDOMEventTargetMethods(window),window.Event||(window.Event=tabris.DOMEvent))}(),function(){function a(a,b){if("HEAD"===a.tagName&&"SCRIPT"===b.tagName&&b.src){var c;try{c=tabris._client.loadAndExecute(b.src,"","")}catch(d){return console.error("Error loading "+b.src+":",d),console.log(d.stack),void("function"==typeof b.onerror&&b.onerror.call(window,d))}c.loadError?"function"==typeof b.onerror&&b.onerror.call(window,new Error("Could not load "+b.src)):"function"==typeof b.onload&&b.onload.call(window)}}var b=function(){},c=function(a){this.tagName=(a||"").toUpperCase(),this.children=[]};c.prototype={setAttribute:b,appendChild:function(b){return this.children.push(b),a(this,b),b},cloneNode:function(){return new c},lastChild:function(){return new c}},tabris._addDOMDocument=function(a){a.document={documentElement:{},createDocumentFragment:function(){return new c},createElement:function(a){return new c(a)},location:{href:""},readyState:"loading",head:new c("head"),getElementsByTagName:function(a){return this.head.children.filter(function(b){return b.tagName===a.toUpperCase()})},createEvent:function(){return new tabris.DOMEvent}},tabris._addDOMEventTargetMethods(a.document),"undefined"==typeof a.location&&(a.location=a.document.location),tabris.load(function(){a.document.readyState="complete";var b=document.createEvent("Events");b.initEvent("DOMContentLoaded",!1,!1),a.document.dispatchEvent(b)}),a.navigator={userAgent:"tabris-js"}},"undefined"==typeof window||window.document||tabris._addDOMDocument(window)}(),function(){function a(a){return"number"==typeof a&&isFinite(a)?Math.max(0,Math.round(a)):0}tabris.registerType("_Timer",{_type:"tabris.Timer",_events:{Run:!0},_properties:{delay:"any",repeat:"any"}}),tabris._addWindowTimerMethods=function(b){function c(a,b,c,f){var g=d++;return tabris.load(function(){var d=tabris.create("_Timer",{delay:b,repeat:c}).on("Run",function(){a.apply(window,f),c||(d.dispose(),delete e[g])});d._nativeCall("start"),e[g]=d}),g}if("function"!=typeof b.setTimeout){var d=0,e={};b.setTimeout=function(b,d){var e=Array.prototype.slice.call(arguments,2);return c(b,a(d),!1,e)},b.setInterval=function(b,d){var e=Array.prototype.slice.call(arguments,2);return c(b,a(d),!0,e)},b.clearTimeout=b.clearInterval=function(a){var b=e[a];b&&(b._nativeCall("cancel",{}),b.dispose(),delete e[a])}}},"undefined"!=typeof window&&tabris._addWindowTimerMethods(window)}(),function(){function a(){var a={};return["model","platform","version"].forEach(function(b){c(a,b,d(b))}),a}function b(){var a={};return c(a,"width",d("screenWidth")),c(a,"height",d("screenHeight")),a}function c(a,b,c){Object.defineProperty(a,b,{get:c,set:function(){}})}function d(a){return function(){return tabris.device.get(a)}}function e(a){return function(){return a}}tabris.registerType("_Device",{_type:"tabris.Device",_properties:{model:"any",platform:"any",version:"any",language:"any",orientation:"any",screenWidth:"any",screenHeight:"any",scaleFactor:"any"},_setProperty:function(){},_events:{"change:orientation":{name:"orientationchange",trigger:function(a){this._triggerChangeEvent("orientation",a.orientation)}}},dispose:function(){throw new Error("cannot dispose device object")}}),tabris._publishDeviceProperties=function(f){"device"in f||c(f,"device",e(a())),"screen"in f||c(f,"screen",e(b())),"navigator"in f&&!("language"in f.navigator)&&c(f.navigator,"language",d("language")),"devicePixelRatio"in f||c(f,"devicePixelRatio",d("scaleFactor"))},tabris.device=tabris("_Device"),"undefined"!=typeof window&&tabris._publishDeviceProperties(window)}(),tabris.registerType("_App",{_type:"tabris.App",_events:{pause:{name:"Pause",trigger:a},resume:{name:"Resume",trigger:a},open:{name:"Open",trigger:a},patchInstall:{trigger:b},backnavigation:{trigger:function(){var a={};return this.trigger("backnavigation",this,a),a.preventDefault===!0}}},getResourceLocation:function(a){this._resourceBaseUrl||(this._resourceBaseUrl=this._nativeGet("resourceBaseUrl"));var b=null!=a?"/"+c(""+a):"";return this._resourceBaseUrl+b},dispose:function(){throw new Error("tabris.app can not be disposed")},reload:function(){this._nativeCall("reload",{})},installPatch:function(a,b){if("string"!=typeof a)throw new Error("parameter url is not a string");this._pendingPatchCallback?"function"==typeof b&&b(new Error("Another installPatch operation is already pending.")):(this._pendingPatchCallback=b||!0,this._listen("patchInstall",!0),this._nativeCall("installPatch",{url:a}))}}),tabris.load(function(){tabris.app=tabris("_App")}),tabris.registerType("_Display",{_type:"rwt.widgets.Display"}),tabris.registerWidget("_Shell",{_type:"rwt.widgets.Shell",_events:{Close:!0},_properties:{style:"any",mode:"any",active:"any"}}),tabris.registerWidget("_UI",{_type:"tabris.UI",_events:{ShowPreviousPage:!0},_supportsChildren:!0,_create:function(){return tabris.create("_Display"),this._shell=tabris.create("_Shell",{style:["NO_TRIM"],mode:"maximized",active:!0,visible:!0}).on("Close",function(){this.dispose()}),tabris.Proxy.prototype._create.call(this,{}),this._nativeSet("shell",this._shell.cid),this._pages=[],this._drawer=null,this._on("ShowPreviousPage",function(){var a=this.get("activePage");a&&a.close()}),this._on("change:activePage",this._onChangeActivePage,this),this._removedPages=[],Object.defineProperty(this,"drawer",{get:function(){return this._drawer}.bind(this),set:function(){}}),this},_properties:{image:"image",toolbarVisible:{type:"boolean","default":!0},activePage:{access:{set:function(a,b,c){if(!(b instanceof tabris.Page))throw new Error("Value for activePage is not a page");this._nativeSet("activePage",b._page.cid),this._storeProperty(a,b,c)}}}},_getContainer:function(a){switch(a.type){case"Drawer":return a._drawer;case"Action":return this;default:return this._shell}},_setCurrentDrawer:function(a){if(this._drawer&&a)throw new Error("Can not create multiple instances of Drawer");this._drawer=a},_pageOpened:function(a){this.set("activePage",a)},_pageClosed:function(a){if(this._isOnStack(a)){a._isTopLevel&&a!==this._getCurrentTopLevelPage()?a._isTopLevel&&this._removeFromStack(a):(this._removePagesOnTop(a),this._pages.pop());var b=this._getCurrentPage();if(!b)throw new Error("Cannot close the last page");this.set("activePage",b)}},_onChangeActivePage:function(a,b){if(b!==this._getCurrentPage()){if(!this._getCurrentPage()&&!b._isTopLevel)throw new Error("Opened page without a top-level page");var c=this._isOnStack(b);(c||b._isTopLevel)&&(this._removePagesOnTop(b),c&&b._isTopLevel&&this._removeFromStack(b)),b!==this._getCurrentPage()&&this._pages.push(b)}this._updateActivePage(b)},_removePagesOnTop:function(a){for(var b=this._getCurrentPage();b&&b!==a&&!b._isTopLevel;)this._removedPages.push(this._pages.pop()),b=this._getCurrentPage()},_getCurrentTopLevelPage:function(){for(var a=this._pages.length-1;a>0;){var b=this._pages[a--];if(b._isTopLevel)return b}},_getCurrentPage:function(){return this._pages[this._pages.length-1]},_removeFromStack:function(a){var b=this._pages.indexOf(a);-1!==b&&this._pages.splice(b,1)},_isOnStack:function(a){return-1!==this._pages.indexOf(a)},_updateActivePage:function(a){var b=this._oldActivePage;a!==b&&(b&&b.trigger("disappear",b),a&&a.trigger("appear",a)),this._closeRemovedPages(),this._oldActivePage=a},_closeRemovedPages:function(){this._removedPages.forEach(function(a){a.close()}),this._removedPages=[]}}),tabris.load(function(){tabris.ui=tabris.create("_UI")}),function(){function a(a,b){var c=a.get(b);return"function"==typeof c?c.apply(null,Array.prototype.slice.call(arguments,2)):c}function b(a,b){var c=a._cellTypes||(a._cellTypes=[]),d=c.indexOf(b);return-1===d&&(d+=c.push(b)),d}function c(a,b){var c=a._cellTypes||[];return c[b]}function d(a){return function(){var b=this.get(a);b!==this["_prev:"+a]&&this._triggerChangeEvent(a,b),this["_prev:"+a]=b}}tabris.registerWidget("CollectionView",{_type:"tabris.CollectionView",_supportsChildren:function(a){return a instanceof tabris.Cell},_properties:{itemHeight:{type:"any","default":0,access:{set:function(a,b,c){"function"!=typeof b&&this._nativeSet("itemHeight",b),this._storeProperty(a,b,c)}}},items:{type:"array",access:{set:function(a,b,c){this._setItems(b,c)},get:function(){return this._items.concat()}}},initializeCell:{type:"function","default":null,access:{set:function(a,b){this._storeProperty(a,b)}}},cellType:{type:"any","default":null,access:{set:function(a,b,c){this._storeProperty(a,b,c)}}},refreshEnabled:{type:"boolean","default":!1},refreshIndicator:{type:"boolean","default":!1},refreshMessage:{type:"string","default":""},firstVisibleIndex:{type:"number",access:{set:function(a){console.warn(this.type+": Cannot set read-only property '"+a+"'.")}}},lastVisibleIndex:{type:"number",access:{set:function(a){console.warn(this.type+": Cannot set read-only property '"+a+"'.")}}}},_create:function(){this._items=[];var a=tabris.Proxy.prototype._create.apply(this,arguments);return this._nativeListen("requestinfo",!0),this._nativeListen("createitem",!0),this._nativeListen("populateitem",!0),this._reload(),a},set:function(){var a=tabris.Proxy.prototype.set.apply(this,arguments);return this._reload(),a},_events:{refresh:{trigger:function(a){this.trigger("refresh",this,a)}},requestinfo:{trigger:function(c){var d=this._getItem(this._items,c.index),e=a(this,"cellType",d),f=a(this,"itemHeight",d,e),g=b(this,e);this._nativeCall("describeItem",{index:c.index,type:g,height:f})}},createitem:{trigger:function(a){var b=tabris.create("Cell",{});b._parent=this,this._addChild(b),this._nativeCall("addItem",{widget:b.cid});var d=this.get("initializeCell");"function"!=typeof d?console.warn("initializeCell callback missing"):d(b,c(this,a.type))}},populateitem:{trigger:function(a){var b=tabris(a.widget),c=this._getItem(this._items,a.index);b.set("itemIndex",a.index),c!==b.get("item")?b.set("item",c):b.trigger("change:item",b,c,{})}},select:{name:"selection",listen:function(a){this._nativeListen("selection",a)},trigger:function(a){var b=this._getItem(this._items,a.index);this.trigger("select",this,b,{index:a.index}),this.trigger("selection",{index:a.index,item:b})}},scroll:{trigger:function(a){this.trigger("scroll",this,a)}},"change:firstVisibleIndex":{listen:function(a){a?this._on("scroll",e):this._off("scroll",e)}},"change:lastVisibleIndex":{listen:function(a){a?this._on("scroll",f):this._off("scroll",f)}}},_setItems:function(a,b){this._items=a||[],this._triggerChangeEvent("items",this._items.concat(),b),this._needsReload=!0},_getItem:function(a,b){return a[b]},reveal:function(a){a=this._checkIndex(a),a>=0&&a<this._items.length&&this._nativeCall("reveal",{index:a})},refresh:function(a){return 0===arguments.length?void this._nativeCall("update",{reload:[0,this._items.length]}):(a=this._checkIndex(a),void(a>=0&&a<this._items.length&&this._nativeCall("update",{reload:[a,1]})))},insert:function(a,b){if(!Array.isArray(a))throw new Error("items is not an array");b=1===arguments.length?this._items.length:Math.max(0,Math.min(this._items.length,this._checkIndex(b))),Array.prototype.splice.apply(this._items,[b,0].concat(a)),this._adjustIndicies(b,a.length),this._nativeCall("update",{insert:[b,a.length]})},remove:function(a,b){if(a=this._checkIndex(a),1===arguments.length)b=1;else{if(!("number"==typeof b&&isFinite(b)&&b>=0))throw new Error("illegal remove count");b=Math.min(b,this._items.length-a)}a>=0&&a<this._items.length&&b>0&&(this._items.splice(a,b),this._adjustIndicies(a+b,-b),this._nativeCall("update",{remove:[a,b]}))},_reload:function(){this._needsReload&&(this._nativeCall("reload",{items:this._items.length}),delete this._needsReload)},_checkIndex:function(a){if("number"!=typeof a||!isFinite(a))throw new Error("illegal index");return 0>a?a+this._items.length:a},_adjustIndicies:function(a,b){for(var c=this._children||[],d=0;d<c.length;d++){var e=c[d],f=e.get("itemIndex");f>=a&&e.set("itemIndex",f+b)}}});var e=d("firstVisibleIndex"),f=d("lastVisibleIndex");tabris.registerWidget("Cell",{_type:"rwt.widgets.Composite",_supportsChildren:!0,dispose:function(){console.warn("CollectionView cells are container-managed, they cannot be disposed of")}})}(),tabris.registerWidget("_ScrollBar",{_type:"rwt.widgets.ScrollBar",_events:{Selection:!0},_properties:{style:"any"}}),tabris.registerWidget("ScrollView",{_type:"rwt.widgets.ScrolledComposite",_supportsChildren:!0,_events:{scroll:{listen:function(a){a?this._scrollBar.on("Selection",this._scrollBarListener,this):this._scrollBar.off("Selection",this._scrollBarListener,this)},trigger:function(a){this.trigger(this,a,{})}}},_create:function(a){var b=d.omit(a,["direction"]);this["super"]("_create",b);var c="horizontal"===a.direction?["H_SCROLL"]:["V_SCROLL"];return this._nativeSet("style",c),this._scrollBar=tabris.create("_ScrollBar",{style:"horizontal"===a.direction?["HORIZONTAL"]:["VERTICAL"]}),this._scrollBar._nativeSet("parent",this.cid),this._composite=tabris.create("Composite"),this._composite._nativeSet("parent",this.cid),this._nativeSet("content",this._composite.cid),this},_scrollBarListener:function(){var a=this._nativeGet("origin");this.trigger("scroll",this,{x:a[0],y:a[1]})},_getContainer:function(){return this._composite}}),tabris.registerWidget("ScrollComposite",tabris.ScrollView),function(){tabris.registerWidget("_Drawer",{_type:"tabris.Drawer"}),tabris.registerWidget("Drawer",{_type:"rwt.widgets.Composite",_supportsChildren:!0,_create:function(a){return tabris.ui._setCurrentDrawer(this),this._drawer=tabris.create("_Drawer",{}),this["super"]("_create",d.extend(a,{layoutData:{left:0,right:0,top:0,bottom:0}})),this._setParent(tabris.ui),this},open:function(){return this._drawer._nativeCall("open",{}),this},close:function(){return this._drawer._nativeCall("close",{}),this},dispose:function(){tabris.ui._setCurrentDrawer(null),this._drawer.dispose(),this["super"]("dispose")}})}(),function(){tabris.registerWidget("_Page",{_type:"tabris.Page",_properties:{image:{type:"image",access:{set:function(a,b){this._image=b,this._nativeSet("image",b)},get:function(){return this._image}}},title:{type:"string","default":""},topLevel:"boolean",control:"proxy",parent:"proxy",style:"any"}});var a={access:{set:function(a,b){this._page.set(a,b)},get:function(a){return this._page.get(a)}}},b={title:a,image:a,style:a,topLevel:a,layoutData:{access:{set:function(){},get:function(){}}}};tabris.registerWidget("Page",{_type:"rwt.widgets.Composite",_supportsChildren:!0,_properties:b,_create:function(a){return this["super"]("_create",d.omit(a,Object.keys(b))),this._nativeSet("layoutData",{left:0,right:0,top:0,bottom:0}),this._nativeSet("parent",tabris.ui._shell.cid),this._page=tabris.create("_Page",d.extend(d.pick(a,Object.keys(b)),{parent:tabris.ui,control:this})),this._page.widget=this,this._parent=tabris.ui,tabris.ui._addChild(this),this._on("dispose",function(){tabris.ui._pageClosed(this),this._page.dispose()}),this._isTopLevel=!!a.topLevel,this},open:function(){return tabris.ui._pageOpened(this),this},close:function(){this.dispose()}})}(),function(){function a(a){return tabris.CollectionView.prototype._create.call(this,d.extend({items:e(),initializeCell:f,itemHeight:"iOS"===device.platform?40:48,layoutData:{left:0,top:0,right:0,bottom:0}},a)),this.on("select",function(a,b){b instanceof tabris.Page&&(tabris.ui.drawer&&tabris.ui.drawer.close(),b.open())}),tabris.ui.on("addchild",b,this).on("removechild",c,this),this.on("dispose",function(){tabris.ui.off("addchild",b),tabris.ui.off("removechild",c)}),this}function b(a,b){b instanceof tabris.Page&&b.get("topLevel")&&this.insert([b])}function c(a,b){var c=this.get("items").indexOf(b);-1!==c&&this.remove(c)}function e(){return tabris.ui.children("Page").toArray().filter(function(a){return a.get("topLevel")})}function f(a){tabris.create("Composite",{layoutData:{left:0,right:0,bottom:0,height:1},background:"#bbb"}).appendTo(a);var b=tabris.create("ImageView",{layoutData:{left:10,top:10,bottom:10}}).appendTo(a),c=tabris.create("TextView",{layoutData:{left:72,centerY:0},font:"iOS"===device.platform?"17px .HelveticaNeueInterface-Regular":"14px Roboto Medium",textColor:"iOS"===device.platform?"rgb(22, 126, 251)":"#212121"}).appendTo(a);a.on("change:item",function(a,d){b.set("image",d.get("image")),c.set("text",d.get("title"))})}tabris.PageSelector=function(){var b=new tabris.CollectionView;return b._create=a,b},tabris.PageSelector.prototype.type="PageSelector"}(),tabris.registerWidget("Action",{_type:"tabris.Action",_properties:{image:{type:"image","default":null},placementPriority:{type:["choice",{low:"LOW",high:"HIGH",normal:"NORMAL"}],access:{get:function(){var a=this._nativeGet("placementPriority");return a?a.toLowerCase():a}},nocache:!0},title:{type:"string","default":""}},_events:{select:{name:"Selection",listen:function(a){this._nativeListen("Selection",a)},trigger:function(a){this.trigger("select",this,a)}}},_create:function(a){return this["super"]("_create",a),tabris.ui.append(this),this}}),tabris.registerType("SearchAction",{_type:"tabris.SearchAction",_properties:{enabled:{type:"boolean","default":!0},foreground:{type:"color",nocache:!0},image:{type:"image","default":null},placementPriority:{type:["choice",{low:"LOW",high:"HIGH",normal:"NORMAL"}],nocache:!0,access:{get:function(){var a=this._nativeGet("placementPriority");return a?a.toLowerCase():a}}},title:{type:"string","default":""},visible:{type:"boolean","default":!0,access:{set:function(a,b,c){this._nativeSet("visibility",b),this._storeProperty(a,b,c)}}},proposals:{"default":function(){return[]}},text:{type:"string",access:{set:function(a,b,c){this._nativeSet("query",b),this._triggerChangeEvent(a,b,c)},get:function(){return this._nativeGet("query")}}},message:{type:"string","default":""}},_events:{input:{name:"Modify",listen:function(a){this._nativeListen("Modify",a)},trigger:function(a){this.trigger("input",this,a.query,{})}},accept:{name:"Search",trigger:function(a){this.trigger("accept",this,a.query,{})}},select:{name:"Selection",trigger:function(a){this.trigger("select",this,a)}}},_create:function(a){return this["super"]("_create",a),this._nativeSet("parent",tabris.ui.cid),this},open:function(){return this._nativeCall("open",{}),this}}),tabris.load(function(){"UWP"===device.platform&&(tabris.registerWidget("TabFolder",{_type:"tabris.TabFolder",_properties:{paging:{type:"boolean","default":!1},selection:{type:"proxy","default":null}},_supportsChildren:function(a){return"Tab"===a.type},_events:{select:{alias:"change:selection",trigger:function(a){var b=tabris(a.selection);this._triggerChangeEvent("selection",b),this.trigger("select",this,b,{})}}}}),tabris.registerWidget("Tab",{_type:"tabris.Tab",_properties:{title:{type:"string","default":""},image:{type:"image","default":null},badge:{type:"string","default":""}},_supportsChildren:!0,_setParent:function(a){if(!(a instanceof tabris.TabFolder))throw new Error("Tab must be a child of TabFolder");tabris.Widgets._setParent.call(this,a)}}))}),tabris.load(function(){function a(a){return a instanceof tabris.Tab}function b(b){return!a(b)}if("UWP"!==device.platform){var c=["title","badge","image","visible"];tabris.registerWidget("_TabItem",{_type:"rwt.widgets.TabItem",_properties:{title:{access:{set:function(a,b,c){this._nativeSet("text",b),this._triggerChangeEvent(a,b,c)}}},image:{nocache:!0},badge:{nocache:!0},control:"any",index:"any"}}),tabris.registerWidget("TabFolder",{_type:"rwt.widgets.TabFolder",_create:function(a){return this["super"]("_create",a),"top"===a.tabBarLocation?this._nativeSet("style",["TOP"]):"bottom"===a.tabBarLocation&&this._nativeSet("style",["BOTTOM"]),this},_properties:{paging:{type:"boolean","default":!1,access:{set:function(a,b,c){this._nativeSet("data",{paging:b}),this._storeProperty(a,b,c)}}},selection:{access:{set:function(a,b,c){return b instanceof tabris.Tab?b._isDisposed?void console.warn("Can not set TabFolder selection to disposed Tab"):(this._nativeSet("selection",b._tabItem.cid),void this._triggerChangeEvent("selection",b,c)):void console.warn("Can not set TabFolder selection to "+b)},get:function(){var a=this._nativeGet("selection");return a?tabris(a)._tab:null}}},tabBarLocation:{type:["choice",["top","bottom","hidden","auto"]],"default":"auto"}},_supportsChildren:function(a){return"Tab"===a.type||"_TabItem"===a.type},_events:{select:{name:"Selection",alias:"change:selection",trigger:function(a){var b=tabris(a.selection)._tab;this._triggerChangeEvent("selection",b),this.trigger("select",this,b,{})}}},_getItems:function(){return this._children?this._children.filter(b):new tabris.ProxyCollection},_getSelectableChildren:function(){return this._children?this._children.filter(a):void 0}}),tabris.registerWidget("Tab",{_type:"rwt.widgets.Composite",_properties:{title:{type:"string","default":"",access:{set:function(a,b,c){this._tabItem&&this._tabItem._setProperty("title",b),this._storeProperty(a,b,c)}}},image:{type:"image","default":null,access:{set:function(a,b,c){this._tabItem&&this._tabItem._setProperty("image",b),this._storeProperty(a,b,c)}}},badge:{type:"string","default":"",access:{set:function(a,b,c){this._tabItem&&this._tabItem._setProperty("badge",b),this._storeProperty(a,b,c)}}},visible:{type:"boolean","default":!0,access:{set:function(a,b,c){this._tabItem&&this._tabItem._setProperty("visibility",b),this._storeProperty(a,b,c)}}}},_supportsChildren:!0,_setParent:function(a){if(!(a instanceof tabris.TabFolder))throw new Error("Tab must be a child of TabFolder");tabris.Widgets._setParent.call(this,a),this._tabItem=tabris.create("_TabItem",d.extend({control:this.cid,index:a._getItems().length},this._getItemProps())).appendTo(a),this._tabItem._tab=this,this._on("dispose",this._tabItem.dispose,this._tabItem)},_getItemProps:function(){for(var a={},b=0;b<c.length;b++){var d=c[b];void 0!==this._getStoredProperty(d)&&(a[d]=this._getStoredProperty(d))}return a}})}}),function(){function a(a){return a}function b(a){if(a in this.values)return a;throw new Error(a)}function c(a){var b={};return a.forEach(function(a){b[a]=!0}),b}function e(){var a={};for(var b in h)a[b]=h[b].init;return a}function f(a,b,c){tabris.CanvasContext.prototype[a]=function(){if(b&&arguments.length<b)throw new Error("Not enough arguments to CanvasContext."+a);this._pushOperation(a),c&&c.apply(this,arguments)}}function g(a,b){var c=h[b];Object.defineProperty(a,b,{get:function(){return c.decode(a._state[b])},set:function(d){try{a._state[b]=c.encode(d),a._pushOperation(b),c.addOperations(a,a._state[b])}catch(e){console.warn("Unsupported value for "+b+": "+d)}}})}tabris.registerType("_GC",{_type:"rwt.widgets.GC",_properties:{parent:"proxy"}}),tabris.CanvasContext=function(a){this._gc=a,this._state=e(),this._savedStates=[],this._opCodes=[],this._newOpCodes=[],this._operations=[],this._doubles=[],this._booleans=[],this._strings=[],this._ints=[],this.canvas={width:0,height:0,style:{}};for(var b in h)g(this,b);tabris._on("flush",this._flush,this),a._on("dispose",function(){tabris._off("flush",this._flush,this)},this)},tabris.CanvasContext.prototype={fillRect:function(a,b,c,d){if(arguments.length<4)throw new Error("Not enough arguments to CanvasContext.fillRect");this._pushOperation("beginPath"),this._pushOperation("rect"),this._doubles.push(a,b,c,d),this.fill()},strokeRect:function(a,b,c,d){if(arguments.length<4)throw new Error("Not enough arguments to CanvasContext.strokeRect");this._pushOperation("beginPath"),this._pushOperation("rect"),this._doubles.push(a,b,c,d),this.stroke()},measureText:function(a){return{width:5*a.length+5}},_init:function(a,b){this.canvas.width=a,this.canvas.height=b,this._gc._nativeCall("init",{width:a,height:b,font:[["sans-serif"],12,!1,!1],fillStyle:[0,0,0,255],strokeStyle:[0,0,0,255]})},_flush:function(){this._operations.length>0&&(this._gc._nativeCall("draw",{packedOperations:[this._newOpCodes,this._operations,this._doubles,this._booleans,this._strings,this._ints]}),this._newOpCodes=[],this._operations=[],this._doubles=[],this._booleans=[],this._strings=[],this._ints=[])},_pushOperation:function(a){this._opCodes.indexOf(a)<0&&(this._newOpCodes.push(a),this._opCodes.push(a)),this._operations.push(this._opCodes.indexOf(a))}},f("save",0,function(){this._savedStates.push(d.clone(this._state))}),f("restore",0,function(){this._state=this._savedStates.pop()||this._state}),f("beginPath"),f("closePath"),f("lineTo",2,function(a,b){this._doubles.push(a,b)}),f("moveTo",2,function(a,b){this._doubles.push(a,b)}),f("bezierCurveTo",6,function(a,b,c,d,e,f){this._doubles.push(a,b,c,d,e,f)}),f("quadraticCurveTo",4,function(a,b,c,d){this._doubles.push(a,b,c,d)}),f("rect",4,function(a,b,c,d){this._doubles.push(a,b,c,d)}),f("arc",5,function(a,b,c,d,e,f){this._doubles.push(a,b,c,d,e),this._booleans.push(!!f)}),f("scale",2,function(a,b){this._doubles.push(a,b)}),f("rotate",1,function(a){this._doubles.push(a)}),f("translate",2,function(a,b){this._doubles.push(a,b)}),f("transform",6,function(a,b,c,d,e,f){this._doubles.push(a,b,c,d,e,f)}),f("setTransform",6,function(a,b,c,d,e,f){this._doubles.push(a,b,c,d,e,f)}),f("clearRect",4,function(a,b,c,d){this._doubles.push(a,b,c,d)}),f("fillText",3,function(a,b,c){this._strings.push(a),this._booleans.push(!1,!1,!1),this._doubles.push(b,c)}),f("strokeText",3,function(a,b,c){this._strings.push(a),this._booleans.push(!1,!1,!1),this._doubles.push(b,c)}),f("fill"),f("stroke"),tabris.CanvasContext.getContext=function(a,b,c){return a._gc||(a._gc=tabris.create("_GC",{parent:a})),a._ctx||(a._ctx="Android"===device.platform?new tabris.CanvasContext(a._gc):new tabris.LegacyCanvasContext(a._gc)),a._ctx._init(b,c),a._ctx};var h={lineWidth:{init:1,encode:function(a){if(a>0)return a;throw new Error(a)},decode:a,addOperations:function(a,b){a._doubles.push(b)}},lineCap:{init:"butt",values:c(["butt","round","square"]),encode:b,decode:a,addOperations:function(a,b){a._strings.push(b)}},lineJoin:{init:"miter",values:c(["bevel","miter","round"]),encode:b,decode:a,addOperations:function(a,b){a._strings.push(b)}},fillStyle:{init:[0,0,0,255],encode:d.colorStringToArray,decode:d.colorArrayToString,addOperations:function(a,b){a._ints.push(b[0],b[1],b[2],b[3])}},strokeStyle:{init:[0,0,0,255],encode:d.colorStringToArray,decode:d.colorArrayToString,addOperations:function(a,b){a._ints.push(b[0],b[1],b[2],b[3])}},textAlign:{init:"start",
values:c(["start","end","left","right","center"]),encode:b,decode:a,addOperations:function(a,b){a._strings.push(b)}},textBaseline:{init:"alphabetic",values:c(["top","hanging","middle","alphabetic","ideographic","bottom"]),encode:b,decode:a,addOperations:function(a,b){a._strings.push(b)}}}}(),function(){function a(a){return a}function b(a){if(a in this.values)return a;throw new Error(a)}function c(a){var b={};return a.forEach(function(a){b[a]=!0}),b}function e(){var a={};for(var b in g)a[b]=g[b].init;return a}function f(a,b){var c=g[b];Object.defineProperty(a,b,{get:function(){return c.decode(a._state[b])},set:function(d){try{a._state[b]=c.encode(d),a._operations.push([b,this._state[b]])}catch(e){console.warn("Unsupported value for "+b+": "+d)}}})}tabris.LegacyCanvasContext=function(a){this._gc=a,this._state=e(),this._savedStates=[],this._operations=[],this.canvas={width:0,height:0,style:{}};for(var b in g)f(this,b);tabris._on("flush",this._flush,this),a._on("dispose",function(){tabris._off("flush",this._flush,this)},this)},tabris.LegacyCanvasContext.prototype={save:function(){this._operations.push(["save"]),this._savedStates.push(d.clone(this._state))},restore:function(){this._operations.push(["restore"]),this._state=this._savedStates.pop()||this._state},beginPath:function(){this._operations.push(["beginPath"])},closePath:function(){this._operations.push(["closePath"])},lineTo:function(a,b){this._operations.push(["lineTo",a,b])},moveTo:function(a,b){this._operations.push(["moveTo",a,b])},bezierCurveTo:function(a,b,c,d,e,f){this._operations.push(["bezierCurveTo",a,b,c,d,e,f])},quadraticCurveTo:function(a,b,c,d){this._operations.push(["quadraticCurveTo",a,b,c,d])},rect:function(a,b,c,d){this._operations.push(["rect",a,b,c,d])},arc:function(a,b,c,d,e,f){this._operations.push(["arc",a,b,c,d,e,!!f])},scale:function(a,b){this._operations.push(["scale",a,b])},rotate:function(a){this._operations.push(["rotate",a])},translate:function(a,b){this._operations.push(["translate",a,b])},transform:function(a,b,c,d,e,f){this._operations.push(["transform",a,b,c,d,e,f])},setTransform:function(a,b,c,d,e,f){this._operations.push(["setTransform",a,b,c,d,e,f])},clearRect:function(a,b,c,d){this._operations.push(["clearRect",a,b,c,d])},fillRect:function(a,b,c,d){this._operations.push(["beginPath"],["rect",a,b,c,d]),this.fill()},strokeRect:function(a,b,c,d){this._operations.push(["beginPath"],["rect",a,b,c,d]),this.stroke()},fillText:function(a,b,c){this._operations.push(["fillText",a,!1,!1,!1,b,c])},strokeText:function(a,b,c){this._operations.push(["strokeText",a,!1,!1,!1,b,c])},fill:function(){this._operations.push(["fill"])},stroke:function(){this._operations.push(["stroke"])},measureText:function(a){return{width:5*a.length+5}},_init:function(a,b){this.canvas.width=a,this.canvas.height=b,this._gc._nativeCall("init",{width:a,height:b,font:[["sans-serif"],12,!1,!1],fillStyle:[0,0,0,255],strokeStyle:[0,0,0,255]})},_flush:function(){this._operations.length>0&&(this._gc._nativeCall("draw",{operations:this._operations}),this._operations=[])}};var g={lineWidth:{init:1,encode:function(a){if(a>0)return a;throw new Error(a)},decode:a},lineCap:{init:"butt",values:c(["butt","round","square"]),encode:b,decode:a},lineJoin:{init:"miter",values:c(["bevel","miter","round"]),encode:b,decode:a},fillStyle:{init:[0,0,0,255],encode:d.colorStringToArray,decode:d.colorArrayToString},strokeStyle:{init:[0,0,0,255],encode:d.colorStringToArray,decode:d.colorArrayToString},textAlign:{init:"start",values:c(["start","end","left","right","center"]),encode:b,decode:a},textBaseline:{init:"alphabetic",values:c(["top","hanging","middle","alphabetic","ideographic","bottom"]),encode:b,decode:a}}}(),function(){tabris.registerType("_ClientStore",{_type:"tabris.ClientStore"});var a;tabris.WebStorage=function(){a=tabris("_ClientStore")},tabris.WebStorage.prototype={setItem:function(b,c){if(!b)throw new TypeError("Key argument must be specified to execute 'setItem'");if(!c)throw new TypeError("Value argument must be specified to execute 'setItem'");a._nativeCall("add",{key:tabris.PropertyTypes.string.encode(b),value:tabris.PropertyTypes.string.encode(c)})},getItem:function(b){var c=a._nativeCall("get",{key:tabris.PropertyTypes.string.encode(b)});return void 0===c?null:c},removeItem:function(b){a._nativeCall("remove",{keys:[tabris.PropertyTypes.string.encode(b)]})},clear:function(){a._nativeCall("clear")}},tabris.StorageEvent=function(a){this.type=a},tabris.StorageEvent.prototype=d.extendPrototype(tabris.DOMEvent,{bubbles:!1,cancelable:!1,key:"",oldValue:null,newValue:null,url:"",storageArea:null}),window.Storage||(window.Storage=tabris.WebStorage,window.localStorage=new tabris.WebStorage)}(),function(){tabris.registerType("_HttpRequest",{_type:"tabris.HttpRequest",_events:{StateChange:!0,DownloadProgress:!0,UploadProgress:!0}});var a=["loadstart","readystatechange","load","loadend","progress","timeout","abort","error"],b=["progress","loadstart","load","loadend","timeout","abort","error"];tabris.XMLHttpRequest=function(){var a=c(this);f(this,a),g(this,a),h(this,a),j(this,a),i(this,a),k(this,a),n(this,a),o(this,a),p(this,a),l(this,a),e(a),this.open=q(this,a),this.send=r(this,a),this.abort=s(this,a),this.setRequestHeader=t(this,a),this.getResponseHeader=u(this,a),this.getAllResponseHeaders=v(this,a),tabris._addDOMEventTargetMethods(this),tabris._addDOMEventTargetMethods(a.uploadEventTarget)},tabris.XMLHttpRequest.prototype={UNSENT:0,OPENED:1,HEADERS_RECEIVED:2,LOADING:3,DONE:4},tabris.XMLHttpRequestProgressEvent=function(a){this.type=a},tabris.XMLHttpRequestProgressEvent.prototype=d.extendPrototype(tabris.DOMEvent,{lengthComputable:!1,loaded:0,total:0});var c=function(a){var b={};return b.proxy=null,b.authorRequestHeaders={},b.uploadListeners={},b.uploadEventTarget={},b.timeout=0,b.status=0,b.statusText="",b.responseHeaders="",b.readyState=a.UNSENT,b.responseText="",b.withCredentials=!1,b.responseType="",b.sendInvoked=!1,b.isSynchronous=!1,b.error=!1,b.uploadComplete=!1,b},e=function(c){a.forEach(function(a){c["on"+a]=null}),b.forEach(function(a){c.uploadListeners["on"+a]=null})},f=function(a,b){Object.defineProperty(a,"upload",{get:function(){return b.uploadEventTarget},set:function(){}})},g=function(a,b){Object.defineProperty(a,"readyState",{get:function(){return b.readyState},set:function(){}})},h=function(a,b){Object.defineProperty(a,"timeout",{get:function(){return b.timeout},set:function(a){isNaN(a)||(b.timeout=Math.round(a))}})},i=function(a,b){Object.defineProperty(a,"responseText",{get:function(){if(null===b.responseText)return"";if("string"!=typeof b.responseText)throw new Error("IllegalStateError: responseText is not a string");return b.readyState!==a.LOADING&&b.readyState!==a.DONE?"":b.error?"":b.responseText},set:function(){}})},j=function(a,b){Object.defineProperty(a,"response",{get:function(){return b.readyState!==a.LOADING&&b.readyState!==a.DONE?"":b.error?"":b.responseText},set:function(){}})},k=function(a,b){Object.defineProperty(a,"responseType",{get:function(){return b.responseType},set:function(c){if(b.readyState===a.LOADING||b.readyState===a.DONE)throw new Error("InvalidStateError: state must not be 'LOADING' or 'DONE' when setting responseType");if(!(["arraybuffer","blob","document","json","text"].indexOf(c)<0)){if(["arraybuffer","blob","document","json"].indexOf(c)>-1)throw new Error("Only the 'text' response type is supported.");b.responseType=c}}})},l=function(c,d){a.forEach(function(a){m(a,c,d)}),b.forEach(function(a){m(a,d.uploadEventTarget,d.uploadListeners)})},m=function(a,b,c){var d="on"+a;Object.defineProperty(b,d,{get:function(){return c[d]},set:function(e){"function"==typeof e&&(b.removeEventListener(a,b[d]),c[d]=e,b.addEventListener(a,b[d]))}})},n=function(a,b){Object.defineProperty(a,"status",{get:function(){return[a.OPENED,a.UNSENT].indexOf(b.readyState)>-1?0:b.error?0:b.status},set:function(){}})},o=function(a,b){Object.defineProperty(a,"statusText",{get:function(){return[a.OPENED,a.UNSENT].indexOf(b.readyState)>-1?"":b.error?"":b.statusText},set:function(){}})},p=function(a,b){Object.defineProperty(a,"withCredentials",{set:function(c){if(b.readyState!==a.UNSENT&&b.readyState!==a.OPENED)throw new Error("InvalidStateError: state must be 'UNSENT' or 'OPENED' when setting withCredentials");if(b.sendInvoked)throw new Error("InvalidStateError: 'send' invoked, failed to set 'withCredentials'");"boolean"==typeof c&&(b.withCredentials=c)},get:function(){return b.withCredentials}})},q=function(a,b){return function(c,d,e,f,g){var h={};z(c,d),h.source=d;var i=d.replace(/.*?:\/\//g,"");if(h.isRelative=!new RegExp("^(?:[a-z]+:)?//","i").test(d),h.userdata=i.substring(0,i.indexOf("@")),"undefined"==typeof e&&(e=!0,f=null,g=null),!e)throw new Error("Only asynchronous request supported.");h.isRelative&&f&&g&&(h.userdata=f+":"+g),b.requestMethod=c,b.requestUrl=h,b.isSynchronous=!e,b.authorRequestHeaders={},b.sendInvoked=!1,b.responseText=null,b.readyState!==a.OPENED&&(b.readyState=a.OPENED,K("readystatechange",a))}},r=function(a,b){return function(c){if(b.proxy=tabris.create("_HttpRequest"),b.proxy.on("StateChange",function(c){x(c,a,b)}),b.proxy.on("DownloadProgress",function(b){F("progress",a,b.lengthComputable,b.loaded,b.total)}),b.proxy.on("UploadProgress",function(b){F("progress",a.upload,b.lengthComputable,b.loaded,b.total)}),b.readyState!==a.OPENED)throw new Error("InvalidStateError: Object's state must be 'OPENED', failed to execute 'send'");if(b.sendInvoked)throw new Error("InvalidStateError: 'send' invoked, failed to execute 'send'");["GET","HEAD"].indexOf(b.requestMethod)>-1&&(c=null),b.requestBody=c,b.error=b.uploadComplete=!1,c||(b.uploadComplete=!0),b.withCredentials&&b.requestUrl.userdata&&a.setRequestHeader("Authorization","Basic "+b.requestUrl.userdata),b.sendInvoked=!0,F("loadstart",a),b.uploadComplete||F("loadstart",a.upload),b.proxy._nativeCall("send",{url:b.requestUrl.source,method:b.requestMethod,timeout:a.timeout,headers:b.authorRequestHeaders,data:b.requestBody})}},s=function(a,b){return function(){b.proxy&&b.proxy._nativeCall("abort"),[a.UNSENT,a.OPENED].indexOf(b.readyState)>-1&&!b.sendInvoked||b.readyState===a.DONE||(K("readystatechange",a),b.uploadComplete||(b.uploadComplete=!0,G(a.upload)),G(a)),b.readyState=a.UNSENT}},t=function(a,b){return function(c,d){if(b.readyState!==a.OPENED)throw new Error("InvalidStateError: Object's state must be 'OPENED', failed to execute 'setRequestHeader'");if(b.sendInvoked)throw new Error("InvalidStateError: cannot set request header if 'send()' invoked and request not completed");if(!B(c))throw new TypeError("Invalid HTTP header name, failed to execute 'open'");if(!C(d))throw new TypeError("Invalid HTTP header value, failed to execute 'open'");if(D(c))throw new Error("Cannot set forbidden header '"+c+"'");c in b.authorRequestHeaders?b.authorRequestHeaders[c]=b.authorRequestHeaders[c]+", "+d:b.authorRequestHeaders[c]=d}},u=function(a,b){return function(c){if([a.UNSENT,a.OPENED].indexOf(a.readyState)>-1)return null;if(b.error)return null;var d=["set-cookie","set-cookie2","status"];if(d.indexOf(c.toLowerCase())>-1)return null;for(var e in b.responseHeaders)if(e.toLowerCase()===c.toLowerCase())return b.responseHeaders[e];return null}},v=function(a,b){return function(){return[a.UNSENT,a.OPENED].indexOf(a.readyState)>-1?"":b.error?"":w(b.responseHeaders)}},w=function(a){var b=[],c=["set-cookie","set-cookie2","status"];for(var d in a)c.indexOf(d.toLowerCase())<0&&b.push(d+": "+a[d]);return b.join("\n")},x=function(a,b,c){switch(a.state){case"headers":c.readyState=b.HEADERS_RECEIVED,c.status=a.code,c.statusText=a.message,c.responseHeaders=a.headers,K("readystatechange",b),c.uploadComplete=!0,I(b.upload);break;case"loading":c.readyState=b.LOADING,K("readystatechange",b);break;case"finished":c.responseText=a.response,c.readyState=b.DONE,K("readystatechange",b),I(b),I(b.upload),c.proxy.dispose(),c.proxy=null;break;case"error":y("error",b,c);break;case"timeout":y("timeout",b,c);break;case"abort":y("abort",b,c)}},y=function(a,b,c){c.error=!0,c.readyState=b.DONE,K("readystatechange",b),H(a,b),c.uploadComplete||(c.uploadComplete=!0,H(a,b.upload)),c.proxy.dispose(),c.proxy=null},z=function(a,b){if(!a)throw new TypeError("Method argument should be specified to execute 'open'");if(!b)throw new TypeError("URL argument should be specified to execute 'open'");A(a)},A=function(a){if(!B(a))throw new TypeError("Invalid HTTP method, failed to execute 'open'");var b=["CONNECT","DELETE","GET","HEAD","OPTIONS","POST","PUT","TRACE","TRACK"],c=a.toUpperCase();b.indexOf(c)>=0&&(a=c);var d=["CONNECT","TRACE","TRACK"];if(d.indexOf(a)>=0)throw new Error("SecurityError: '"+a+"' HTTP method is not secure, failed to execute 'open'")},B=function(a){var b=["(",")","<",">","@",",",";",":","\\",'"',"/","[","]","?","=","{","}"];return!(/[^\x21-\x7E]/.test(a)||b.indexOf(a)>=0)},C=function(a){return!(!/[*A-z\u00C0-\u00ff]+/g.test(a)||a.indexOf("\n")>-1||a.indexOf("\r")>-1)},D=function(a){return E.indexOf(a.toLowerCase())>-1},E=["accept-charset","accept-encoding","access-control-request-headers","access-control-request-method","connection","content-length","cookie","date","dnt","expect","host","keep-alive","origin","referer","te","trailer","transfer-encoding","upgrade","user-agent","via"],F=function(a,b,c,d,e){b.dispatchEvent(J(a,b,c,d,e))},G=function(a){F("progress",a),F("abort",a),F("loadend",a)},H=function(a,b){F("progress",b),F(a,b),F("loadend",b)},I=function(a){F("load",a),F("loadend",a)},J=function(a,b,c,d,e){var f=new tabris.XMLHttpRequestProgressEvent(a);return f.currentTarget=f.target=b,c&&(f.lengthComputable=c),d&&(f.loaded=d),e&&(f.total=e),f},K=function(a,b){var c=L(a,b);b.dispatchEvent(c)},L=function(a,b){var c=new tabris.DOMEvent(a);return c.currentTarget=c.target=b,c};"undefined"==typeof XMLHttpRequest&&(window.XMLHttpRequest=tabris.XMLHttpRequest,window.XMLHttpRequestProgressEvent=tabris.XMLHttpRequestProgressEvent)}()}();